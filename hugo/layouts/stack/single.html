{{ partial "head.html" . }}
{{ $stack := $.Site.Data.stack }}
{{ $headerCtx := dict "ctx" . }}
{{ $heroCtx := dict "ctx" . "data" $stack }}
{{ $footerCtx := dict "ctx" . "include_slack" true "include_email" true }}

<body class="stack-page">
    {{ partial "header.html" $headerCtx }}
    {{ partial "hero.html" $heroCtx }}

    <header
        style="background-image: url('{{ default .Site.Params.headerImageUrl .Params.headerImageUrl }}');"
    >
        <div class="mainContainer">
            <div class="description">
                <h1 class="title">Our stack</h1>
                <p>At source{d} we work carefully to find the best languages, libraries and tools for each purpose in our pipeline</p>
            </div>
        </div>
    </header>

    <div class="fullWidth">
        <div class="stack mainContainer">
            <h2>Our stack</h2>
            {{ range $section := $.Site.Data.stack.stack }}
            <div class="stackSection {{ $section.id }}">
                <h3>{{ $section.title }}</h3>

                <div class="stackItems">
                    {{ range $item := $section.items }}
                    <div class="stackItem">
                        <a href="{{ $item.url }}" target="_blank">
                            <div class="itempic"><img src="/img/stack/{{ $item.id }}.svg" alt="{{ $item.name }}" /></div>
                            {{ if ne $item.desc "" }}
                            <p>{{ $item.desc | safeHTML }} {{ end }}
                        </a>
                    </div>
                    {{ end }}
                </div>
            </div>
            {{ end }}
        </div>
    </div>

    {{ partial "footer.html" $footerCtx }}
</body>

</html>
